<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Little mover</title>

	<style>
		html, body { margin: 0; padding: 0; }
		* {
			-webkit-box-sizing: border-box;
			-moz-box-sizing: border-box;
			box-sizing: border-box;
			position: relative;
		}

		#map {
			margin: 220px auto;
			width: 300px;

			-webkit-perspective: 400px;
			-webkit-transform: rotateX(30deg) rotateZ(30deg);

			-webkit-transform-style: preserve-3d;
		}

		.tile {
			background: #ddd;
			border-top: 1px solid rgba(255, 255, 255, 0.5);
			border-bottom: 1px solid rgba(0, 0, 0, 0.25);
			border-right: 1px solid rgba(0, 0, 0, 0.25);
			border-left: 1px solid rgba(255, 255, 255, 0.5);
			float: left;
			height: 20px;
			/* -webkit-transform: rotateY(-90deg); */
			-webkit-transform-origin: 0 0;
			width: 20px;
		}

		#tilted {
			/* background: #f00;
			-webkit-transform: rotateY(-90deg); */
		}

		.tile:nth-child(2n+1) { background: #aaa; }

		.marker {
			background: #f00;
			border-radius: 10px;
			box-shadow: 0 0 5px #000;
			position: absolute;
			height: 10px;
			width: 10px;
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<script src="jquery.min.js"></script>
	<script>
		var map = $('#map');

		for (var i = 0; i < 225; i++) {
			var tile = $('<div class="tile">');

			if (i == 224) { tile.attr('id', 'last'); }
			tile.attr('data-x', i % 15 + 1);
			tile.attr('data-y', Math.floor(i / 15) + 1);

			map.append(tile);
		}

		var marker = $('<div class="marker">');

		marker.css({
			left: 5,
			top: 5
		})
		marker.attr('data-x', 1);
		marker.attr('data-y', 1);

		map.append(marker);

		var isMoving = false;
		function move(dir, inc) {
			isMoving = true;
			inc++;

			switch (dir) {
				case 'up':
					if (marker.attr('data-y') > 1) {
						marker.css('top', parseInt(marker.style.top) - 1);
						var attr = 'data-y'; var amt = -1;
					}
					break;
				case 'right':
					if (marker.attr('data-x') < 15) {
						marker.css('left', parseInt(marker.style.left) + 1);
						var attr = 'data-x'; var amt = 1;
					}
					break;
				case 'down':
					if (marker.attr('data-y') < 15) {
						marker.css('top', parseInt(marker.style.top) + 1);
						var attr = 'data-y'; var amt = 1;
					}
					break;
				case 'left':
					if (marker.attr('data-x') > 1) {
						marker.css('left', parseInt(marker.style.left) - 1);
						var attr = 'data-x'; var amt = -1;
					}
					break;
			}
			if (inc < 20) {
				setTimeout(function(){
					move(dir, inc);
				}, 5);

			} else {
				marker.attr(attr, parseInt(marker.attr(attr)) + amt);
				isMoving = false;
				inc = 0;
			}
		}
		var keys = { 37: 'left', 38: 'up', 39: 'right', 40: 'down' };
		$(window).keydown(function(e){
			if (keys.hasOwnProperty(e.keyCode)) { 
				e.preventDefault(); 
				
				if (!isMoving) { move(keys[e.keyCode], 0); }
			}
		});
		
	</script>
</body>
</html>